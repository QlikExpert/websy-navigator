"use strict";var _createClass=function(){function e(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var WebsyNavigator=function(){function v(t){_classCallCheck(this,v);var i={triggerClass:"trigger-item",viewClass:"view",activeClass:"active",viewAttribute:"data-view",groupAttribute:"data-group",defaultView:"",defaultGroup:"main",subscribers:[]};if(window.addEventListener("popstate",this.onPopState.bind(this)),this.options=Object.assign({},i,t),this.options.viewClass!==i.viewClass||this.options.activeClass!==i.activeClass){var s="\n        <style>\n          ."+this.options.viewClass+"{ display: none; }\n          ."+this.options.viewClass+"."+this.options.activeClass+"{ display: initial; }\n        </style>\n      ";document.querySelector("head").innerHTML+=s}for(var e=document.getElementsByClassName(this.options.triggerClass),a=0;a<e.length;a++){var n=e[a].attributes[this.options.viewAttribute];if(n&&""!==n.value){var o=e[a].attributes[this.options.groupAttribute],r=this.options.defaultGroup;o&&""!==o.value&&(r=o.value),e[a].classList.add(this.options.triggerClass+"-"+r),e[a].addEventListener("click",this.navigate.bind(this,n.value,r))}}for(var l=document.getElementsByClassName(this.options.viewClass),u=0;u<l.length;u++){var h=l[u].attributes[this.options.groupAttribute];h&&""!==h.value?l[u].classList.add(this.options.viewClass+"-"+h.value):l[u].classList.add(this.options.viewClass+"-"+this.options.defaultGroup)}this.navigate(this.currentPath,this.options.defaultGroup)}return _createClass(v,[{key:"init",value:function(){this.navigate(this.currentPath)}},{key:"navigate",value:function(i,t){""==i&&(i=this.options.defaultView),this.hideTriggerItems(t),this.hideViewItems(t),this.activateItem(i,this.options.triggerClass),this.activateItem(i,this.options.viewClass);var s=this.currentPath;this.currentPath!==i&&t===this.options.defaultGroup&&history.pushState({path:i},i,i),this.options.subscribers.forEach(function(t){t.call(null,i,s)})}},{key:"onPopState",value:function(t){this.navigate(t.state.path)}},{key:"subscribe",value:function(t){this.options.subscribers.push(t)}},{key:"hideTriggerItems",value:function(t){var i=this.options.triggerClass;t&&(i+="-"+t),this.hideItems(i)}},{key:"hideViewItems",value:function(t){var i=this.options.viewClass;t&&(i+="-"+t),this.hideItems(i)}},{key:"hideItems",value:function(t){var i=document.getElementsByClassName(t);if(i)for(var s=0;s<i.length;s++)i[s].classList.remove(this.options.activeClass)}},{key:"activateItem",value:function(t,i){var s=document.getElementsByClassName(i);if(s)for(var e=0;e<s.length;e++)if(s[e].attributes[this.options.viewAttribute]&&s[e].attributes[this.options.viewAttribute].value===t){s[e].classList.add(this.options.activeClass);break}}},{key:"currentPath",get:function(){var t=window.location.pathname.split("/").pop();return-1!==t.indexOf(".htm")?"":t}}]),v}();