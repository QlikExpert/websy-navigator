"use strict";var _createClass=function(){function i(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,s,e){return s&&i(t.prototype,s),e&&i(t,e),t}}();function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var WebsyNavigator=function(){function v(t){_classCallCheck(this,v);var s={menuClass:"nav-item",viewClass:"view",activeClass:"active",viewAttribute:"data-view",groupAttribute:"data-group",defaultView:"",defaultGroup:"main",subscribers:[]};if(window.addEventListener("popstate",this.onPopState.bind(this)),this.options=Object.assign({},s,t),this.options.viewClass!==s.viewClass||this.options.activeClass!==s.activeClass){var e="\n        <style>\n          ."+this.options.viewClass+"{ display: none; }\n          ."+this.options.viewClass+"."+this.options.activeClass+"{ display: initial; }\n        </style>\n      ";document.querySelector("head").innerHTML+=e}for(var i=document.getElementsByClassName(this.options.menuClass),a=0;a<i.length;a++){var n=i[a].attributes[this.options.viewAttribute];if(n&&""!==n.value){var o=i[a].attributes[this.options.groupAttribute],r=this.options.defaultGroup;o&&""!==o.value&&(r=o.value),i[a].classList.add(this.options.menuClass+"-"+r),i[a].addEventListener("click",this.navigate.bind(this,n.value,r))}}for(var u=document.getElementsByClassName(this.options.viewClass),l=0;l<u.length;l++){var h=u[l].attributes[this.options.groupAttribute];h&&""!==h.value?u[l].classList.add(this.options.viewClass+"-"+h.value):u[l].classList.add(this.options.viewClass+"-"+this.options.defaultGroup)}this.navigate(this.currentPath,this.options.defaultGroup)}return _createClass(v,[{key:"init",value:function(){this.navigate(this.currentPath)}},{key:"navigate",value:function(s,t){""==s&&(s=this.options.defaultView),this.hideMenuItems(t),this.hideViewItems(t),this.activateItem(s,this.options.menuClass),this.activateItem(s,this.options.viewClass);var e=this.currentPath;this.currentPath!==s&&t===this.options.defaultGroup&&history.pushState({path:s},s,s),this.options.subscribers.forEach(function(t){t.call(null,s,e)})}},{key:"onPopState",value:function(t){this.navigate(t.state.path)}},{key:"subscribe",value:function(t){this.options.subscribers.push(t)}},{key:"hideMenuItems",value:function(t){var s=this.options.menuClass;t&&(s+="-"+t),this.hideItems(s)}},{key:"hideViewItems",value:function(t){var s=this.options.viewClass;t&&(s+="-"+t),this.hideItems(s)}},{key:"hideItems",value:function(t){var s=document.getElementsByClassName(t);if(s)for(var e=0;e<s.length;e++)s[e].classList.remove(this.options.activeClass)}},{key:"activateItem",value:function(t,s){var e=document.getElementsByClassName(s);if(e)for(var i=0;i<e.length;i++)if(e[i].attributes[this.options.viewAttribute]&&e[i].attributes[this.options.viewAttribute].value===t){e[i].classList.add(this.options.activeClass);break}}},{key:"currentPath",get:function(){var t=window.location.pathname.split("/").pop();return-1!==t.indexOf(".htm")?"":t}}]),v}();